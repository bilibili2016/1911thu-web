webpackJsonp([37,49],{"5FKq":function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return i});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.showError?a("div",{staticClass:"error"},[a("div",{staticClass:"errorMsg"},[a("h5",[e._v(e._s(e.errorMsg))]),a("p",[a("span",{on:{click:e.reload}},[e._v("刷新")]),a("span",{on:{click:e.getPlayerInfo}},[e._v("重试")])])])]):e._e()},i=[];r._withStripped=!0},CGnF:function(e,t,a){"use strict";t.a={props:["showError","errorMsg"],methods:{reload:function(){window.location.reload()},getPlayerInfo:function(){this.$emit("getPlayerInfo")}}}},DXaU:function(e,t,a){"use strict";var r=a("Dd8w"),i=a.n(r),l=a("SL1N"),s=(a("lHEt"),a("NYxO")),o=a("v/8m"),n=a("ygf3"),c=a("o/Ov"),p=a("c8EJ");t.a={components:{"v-error":p.a},computed:i()({},Object(s.mapGetters)("auth",["isAuthenticated"])),props:["defaultCurriculumCatalog"],data:function(){return{isTrySee:!1,isTrySeeTime:0,clickTime:"",node:"",showError:!1,playerForm:{curriculumId:"",catalogId:"",curriculumType:1,seek:0},playImg:"http://static-image.1911edu.com/playImg.gif",pauseImg:"http://static-image.1911edu.com/video.png",playerPreviousForm:{curriculumId:"",catalogId:""},playerNextForm:{curriculumId:"",catalogId:""},tcplayer:{mp4:"",width:"100%",height:"100%",live:!1},aliPlayer:{id:"mediaPlayer",width:"100%",height:"100%",autoplay:!1,vid:"",playauth:"",components:[{name:"playerNextComponent",type:n.a,args:[this.nextVideo]},{name:"playerPreviousComponent",type:c.a,args:[this.previousVideo]}]},autoplay:!1,playerDetailForm:{curriculumId:""},defaultPlayerInfo:{curriculumId:""},players:"",player:"",ceshiUrl:"http://ceshi.1911edu.com",localUrl:"http://localhost:8080",seconds:5e5,nextCatalogId:"",link:"",lookAt:"",socket:"",playAuthInfo:{},index:0,errorMsg:"",playLoading:"",loadingFlag:!0,playVideo:!1,beforeRoute:"",fullScreen:!0}},methods:{closeTip:function(){this.isTrySee=!1},changePlayImg:function(e,t){this.$emit("changePlayImg",e,t)},getdefaultPlayerUrl:function(){var e=this;if(this.playerForm.curriculumId=Object(o.h)("kid"),""==this.playerForm.catalogId)return Object(o.i)(this,"error","抱歉，您暂无此课程权限！"),!1;l.B.getPlayerInfo(this.playerForm).then(function(t){if(0!==t.status)return Object(o.i)(e,"error",t.msg),!1;e.changePlayImg(e.pauseImg,e.playerForm.catalogId),e.playAuthInfo=t.data,e.aliPlayer.vid=t.data.video_id,e.aliPlayer.playauth=t.data.playAuth,e.player&&(e.player.dispose(),e.$refs.playInner.insertBefore(e.node,e.$refs.playVideo)),e.player=new Aliplayer(e.aliPlayer),e.playerNextForm.curriculumId=e.playerForm.curriculumId,e.playerNextForm.catalogId=t.data.nextCatalogId,e.playerPreviousForm.curriculumId=e.playerForm.curriculumId,e.playerPreviousForm.catalogId=t.data.previousCatalogId,e.lookAt=t.data.look_at,e.nextCatalogId=t.data.nextCatalogId,e.$bus.$emit("closeCover"),e.loadingFlag&&(e.loadingFlag=!1,e.playLoading=setInterval(function(){e.playerLoad()},500)),e.player.on("ready",e.readyPlay),e.player.on("play",e.playerPlay),e.player.on("pause",e.playerPause),e.player.on("requestFullScreen",e.fullScreenTrue),e.player.on("cancelFullScreen",e.exitFullScreen),e.player.on("ended",e.playerEnded),e.player.on("error",e.playerError),2==e.lookAt?(e.isTrySee=!0,e.isTrySeeTime=Math.round(Number(t.data.free_time)/60*100)/100):e.isTrySee=!1})},playerLoad:function(){document.getElementsByClassName("prism-hide")[0]&&(document.getElementsByClassName("prism-hide")[0].className="prism-loading")},rePlay:function(){this.showError=!1,this.getdefaultPlayerUrl()},readyPlay:function(){if(this.beforeRoute!=this.$route.path)return!1;clearInterval(this.playLoading),this.playerLoad(),this.playVideo=!0,this.loadingFlag=!0,this.aliPlayer.autoplay?(this.playVideo=!1,this.player.play()):this.playVideo=!0,this.bought&&this.playerForm.seek&&(this.player.seek(this.playerForm.seek),this.playerForm.seek=0),this.keyboard()},playerPlay:function(){var e=this;this.playVideo=!1,clearInterval(this.playLoading),clearInterval(this.interval),this.interval=setInterval(function(){if(e.seconds<=0)e.seconds=1,e.courseList.success=!1,e.courseList.inputID="",clearInterval(e.interval);else{e.seconds--;var t=e.player.getCurrentTime();e.isTrySee&&e.preview(e.playAuthInfo.free_time,t),e.playVideo&&(e.playVideo=!1)}},1e3),this.changePlayImg(this.playImg,this.playerForm.catalogId)},playerPause:function(){this.playVideo=!0,this.player.pause(),clearInterval(this.interval),this.changePlayImg(this.pauseImg,this.playerForm.catalogId)},playerEnded:function(){this.playVideo=!0,this.aliPlayer.autoplay=!1,this.changePlayImg(this.pauseImg,this.playerForm.catalogId),clearInterval(this.interval),"2"==this.lookAt?this.player.fullscreenService.cancelFullScreen():(this.$emit("refreshData"),""!==this.nextCatalogId&&this.nextVideo())},playerError:function(e){this.showError=!0,this.errorMsg=e.paramData.display_msg},preview:function(e,t){Number(e)<Number(t)&&(this.index++,this.player.pause(),this.index<2&&(this.playerEnded(),this.rePlay()))},previousVideo:function(){""!==this.playerPreviousForm.curriculumId?(this.playerForm.curriculumId=this.playerPreviousForm.curriculumId,this.playerForm.catalogId=this.playerPreviousForm.catalogId,this.aliPlayer.autoplay=!0,this.getdefaultPlayerUrl()):Object(o.i)(this,"warning","已经是第一节了！")},nextVideo:function(){""!==this.playerNextForm.curriculumId?(this.playerForm.curriculumId=this.playerNextForm.curriculumId,this.playerForm.catalogId=this.playerNextForm.catalogId,this.aliPlayer.autoplay=!0,this.getdefaultPlayerUrl()):Object(o.i)(this,"warning","已经是最后一节了！")},playMedia:function(e){var t=this;clearTimeout(this.clickTime),this.clickTime=setTimeout(function(){navigator.userAgent.indexOf("Firefox")>-1?t.player&&"mediaPlayer"==e.target.offsetParent.id&&(t.playVideo?t.player.play():t.player.pause()):t.player&&"mediaPlayer"==e.path[1].id&&(t.playVideo?t.player.play():t.player.pause())},300)},dblclick:function(e){if(clearTimeout(this.clickTime),this.player&&"mediaPlayer"==e.path[1].id)if(this.player.fullscreenService.getIsFullScreen()){document.getElementsByClassName("prism-big-play-btn")[0].style.visibility="hidden",this.player.fullscreenService.cancelFullScreen()}else{document.getElementsByClassName("prism-big-play-btn")[0].style.visibility="visible",this.player.fullscreenService.requestFullScreen()}},fullScreenTrue:function(){document.getElementsByClassName("prism-big-play-btn")[0].style.visibility="visible",this.fullScreen=!0},exitFullScreen:function(){document.getElementsByClassName("prism-big-play-btn")[0].style.visibility="hidden",Object(o.d)()},keyboard:function(){var e=this;window.onkeydown=function(t){32==t.keyCode&&e.player.fullscreenService.getIsFullScreen()&&e.player&&(e.playVideo?e.player.play():e.player.pause()),37==t.keyCode&&e.player.fullscreenService.getIsFullScreen()&&e.speedRetreat(),39==t.keyCode&&e.player.fullscreenService.getIsFullScreen()&&e.speedAdvance(),38==t.keyCode&&e.player.fullscreenService.getIsFullScreen()&&e.volumeUp(),40==t.keyCode&&e.player.fullscreenService.getIsFullScreen()&&e.volumeDown()}},speedRetreat:function(){this.player.seek(1*this.player.getCurrentTime()-5)},speedAdvance:function(){this.player.getDuration()-this.player.getCurrentTime()>5&&this.player.seek(1*this.player.getCurrentTime()+5)},volumeUp:function(){var e=this.player.getVolume();e=e>.9?1:e+.1,this.player.setVolume(e)},volumeDown:function(){var e=this.player.getVolume();e=e<.1?0:e-.1,this.player.setVolume(e)},action:function(){this.player&&("pause"!=this.player.getStatus()&&"loading"!=this.player.getStatus()&&"ready"!=this.player.getStatus()&&"ended"!=this.player.getStatus()||(this.player.play(),this.playVideo=!1),"playing"==this.player.getStatus()&&(this.player.pause(),this.playVideo=!0))}},mounted:function(){var e=this;this.$bus.$on("updateCourse",function(t){e.playerForm=t,e.aliPlayer.autoplay=t.autoplay,e.rePlay()}),this.$bus.$on("reupdatecourse",function(t){e.playerForm.catalogId=t,e.aliPlayer.autoplay=!0,e.getdefaultPlayerUrl()}),this.node=this.$refs.mediaPlayer,this.beforeRoute=this.$route.path},beforeRouteEnter:function(e,t,a){a(function(e){e.player&&(e.player.pause(),clearInterval(that.interval))})},beforeRouteLeave:function(e,t,a){this.player&&(this.player.pause(),clearInterval(that.interval)),a()}}},GpD0:function(e,t,a){var r=a("ricX");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),a("rjj0")("4f97ec52",r,!1,{sourceMap:!1})},NhOD:function(e,t,a){"use strict";var r=a("Dd8w"),i=a.n(r),l=a("NYxO"),s=(a("lHEt"),a("SL1N"),a("v/8m"),a("Y0R6"));t.a={components:{"v-player":s.default},props:["courseList","config"],computed:i()({},Object(l.mapState)("auth",["token","productsNum"])),data:function(){return{isShowCover:!0,playImg:"http://static-image.1911edu.com/play.png",curriculumcartids:{cartid:null,type:1},playerForm:{curriculumId:"",catalogId:"",autoplay:!0}}},methods:{refreshData:function(){this.$emit("refreshData")},changePlayImg:function(e,t){this.$emit("changePlayImg",e,t)},handleImgPlay:function(e){this.$bus.$emit("reupdatecourse",this.courseList.catalog_id)},closeCover:function(){this.isShowCover=!1}},mounted:function(){var e=this;this.$bus.$on("closeCover",function(t){e.closeCover()})}}},"V/Ya":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAhFBMVEUAAAC0tMi0tMi0tMi0tMi0tMi0tMi0tMi0tMi0tMi0tMi0tMi0tMi0tMi0tMi0tMi0tMi0tMi0tMi0tMi0tMi0tMi0tMi0tMi1tci0tMi0tMi0tMj///+yssfDw9PNzdv09Pa5uczb2+Tt7fP4+Prj4+q9vc/n5+3S0t7f3+fW1uLHx9bQ8wyvAAAAG3RSTlMAy/nu4xMGpw14OZ7TrU7EZ0Qx235yvbJtYH9/iKVlAAABYklEQVQoz23S63KCMBAFYBKC3JGLVttIgEDA6vu/X5dDiDrT80eZb3aXLPG2HKLknH5lQmRf6TmJDt576mvIBG8pXLDwXL9pUKRCEsh5HtYfkRbBbtH3kUtJ1GndKfoj+bGMbJ01Zfpp6g1UshK1h4qMUJkbYhQhabXOrVMyyv1mc8cjT2saGPtybTroHX9nNPbjyEtyCZxfuE2VeeLFDPjWVg8bstgLqSv4OW7WP0HUN/cYtzh00LEbLErmCYngoNoYjYFbGs/fjV5YdZ2igbsKqnRttVkWo6mtw8bWKT1O68xp1KptLR45bNYgsJ43zego6Pnoby79A539y7aEVo0WkBG7z060PiCausbAS4XF/1vp/wT4ZOs5lt5ludNMHibrxy5oKhZgg0VIVhxwTUrS9iO012tgL1hJ2/8wzsrodTVxWhc/dFdznZvEeeZbyfI4wTynQXUKWSNEw8JTFVj7A7hdQVw4Z7mDAAAAAElFTkSuQmCC"},Y0R6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("DXaU"),i=a("eWJT"),l=a("XyMi"),s=Object(l.a)(r.a,i.a,i.b,!1,null,null,null);s.options.__file="pages/backend/course/components/CardPlayer.vue",t.default=s.exports},YwSY:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return i});var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"curriculumList center"},[r("div",{staticClass:"course clearfix"},[r("el-card",{staticClass:"fl",attrs:{"body-style":{padding:"0px"}}},[e.isShowCover?r("div",{staticClass:"goodplay"},[r("div",{staticClass:"img-con"},[r("img",{staticClass:"image",attrs:{src:e.courseList.picture}})]),r("div",{staticClass:"common-button btn-bg"},[r("div",{staticClass:"playBtn-detail"},[r("img",{attrs:{src:e.playImg,alt:""},on:{click:function(t){e.handleImgPlay(e.courseList)}}})])])]):e._e(),r("v-player",{on:{changePlayImg:e.changePlayImg,refreshData:e.refreshData}})],1),r("div",{staticClass:"particularss fr"},[r("div",{staticClass:"currentclum"},[r("h4",[e._v(e._s(e.courseList.title))]),r("div",{staticClass:"study clearfix"},[r("p",[e._v(e._s(e.courseList.introduction))]),r("div",{staticClass:"studyInfo"},[r("span",{staticClass:"fl coursenum"},[r("img",{attrs:{src:a("V/Ya"),alt:""}}),e._v("\n                学习人数："+e._s(e.courseList.study_number)+"\n              ")]),r("span",{staticClass:"fl coursenum"},[r("span",[r("img",{attrs:{src:a("/Tju"),alt:""}}),e._v("\n                  总学时："+e._s(e.courseList.study_time)+"\n                ")])]),r("span",{staticClass:"rate"},[e._v("课程评分：\n                "),r("el-rate",{attrs:{disabled:""},model:{value:e.courseList.score,callback:function(t){e.$set(e.courseList,"score",t)},expression:"courseList.score"}})],1)])])])])],1)])])},i=[];r._withStripped=!0},a2kd:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("NhOD"),i=a("YwSY"),l=a("XyMi"),s=Object(l.a)(r.a,i.a,i.b,!1,null,null,null);s.options.__file="pages/backend/course/components/Card.vue",t.default=s.exports},c8EJ:function(e,t,a){"use strict";var r=a("CGnF"),i=a("5FKq"),l=a("XyMi"),s=!1,o=function(e){s||a("pIix")},n=Object(l.a)(r.a,i.a,i.b,!1,o,"data-v-aa4ca744",null);n.options.__file="components/common/PlayerError.vue",t.a=n.exports},eWJT:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return i});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"playInner",staticClass:"playInner cardPlayer",on:{click:e.playMedia,dblclick:e.dblclick}},[a("div",{ref:"mediaPlayer",attrs:{id:"mediaPlayer"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.playVideo,expression:"playVideo"}],ref:"playVideo",staticClass:"playVideo",on:{click:e.action}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isTrySee,expression:"isTrySee"}],staticClass:"isTrySee"},[e._v("\n    试看\n    "),a("span",[e._v(e._s(e.isTrySeeTime))]),e._v("分钟，观看完整版请\n    "),a("span",{staticClass:"gobuy"},[e._v("购买")]),a("i",{staticClass:"el-icon-error",on:{click:e.closeTip}})]),a("v-error",{attrs:{showError:e.showError,errorMsg:e.errorMsg},on:{getPlayerInfo:e.rePlay}})],1)},i=[];r._withStripped=!0},"o/Ov":function(e,t,a){"use strict";var r=a("Zrlr"),i=a.n(r),l=a("wxAW"),s=a.n(l),o=a("GpD0"),n=(a.n(o),function(){function e(t){i()(this,e),this.clickHandle=t,this.$html=$('<div class="player-olympic-player-previous"><div class="player-olympic-player-previous-tip">上一节</div></div>')}return s()(e,[{key:"createEl",value:function(e){this.$html.click(this.clickHandle),$(e).find(".prism-play-btn").after(this.$html)}}]),e}());t.a=n},pIix:function(e,t,a){var r=a("vNYA");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals),a("rjj0")("0da13a34",r,!1,{sourceMap:!1})},ricX:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,'.player-olympic-player-next{width:24px;height:28px;background:url("http://static-image.1911edu.com/next.png") 50% no-repeat;background-size:contain;float:left;margin-left:15px;margin-top:12px;cursor:pointer;position:relative}.player-olympic-player-next-tip{position:absolute;top:-45px;display:none;font-size:12px;color:#fff;line-height:28px;letter-spacing:0;text-align:center;background:#3c3c3c;-webkit-box-shadow:0 0 5px 0 rgba(0,0,0,.1);box-shadow:0 0 5px 0 rgba(0,0,0,.1);width:58px;height:28px;left:50%;margin-left:-29px}.player-olympic-player-next:hover .player-olympic-player-next-tip{display:block}.player-olympic-player-previous{width:24px;height:28px;background:url("http://static-image.1911edu.com/previous.png") 50% no-repeat;background-size:contain;float:left;margin-left:15px;margin-top:12px;cursor:pointer;position:relative}.player-olympic-player-previous-tip{position:absolute;top:-45px;display:none;font-size:12px;color:#fff;line-height:28px;letter-spacing:0;text-align:center;background:#3c3c3c;-webkit-box-shadow:0 0 5px 0 rgba(0,0,0,.1);box-shadow:0 0 5px 0 rgba(0,0,0,.1);width:58px;height:28px;left:50%;margin-left:-29px}.player-olympic-player-previous:hover .player-olympic-player-previous-tip{display:block}',""])},vNYA:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,".error[data-v-aa4ca744]{width:100%;position:absolute;top:0;bottom:0;left:0;right:0;background-color:#333;z-index:101}.error .errorMsg[data-v-aa4ca744]{width:80%;height:200px;background-color:#000;position:absolute;top:50%;left:50%;margin-top:-100px;margin-left:-40%;border-radius:10px}.error .errorMsg h5[data-v-aa4ca744]{height:52px;text-align:center;margin:40px 0;line-height:26px;padding:0 20px;color:#fff;font-size:16px}.error .errorMsg p[data-v-aa4ca744]{text-align:center;color:#fff;font-size:14px}.error .errorMsg p span[data-v-aa4ca744]{width:150px;height:40px;line-height:40px;border-radius:5px;background-color:#773084;margin:0 15px;cursor:pointer}.error .errorMsg p span[data-v-aa4ca744]:first-child{color:#666;background-color:#ddd}",""])},ygf3:function(e,t,a){"use strict";var r=a("Zrlr"),i=a.n(r),l=a("wxAW"),s=a.n(l),o=a("GpD0"),n=(a.n(o),function(){function e(t){i()(this,e),this.clickHandle=t,this.$html=$('<div class="player-olympic-player-next"><div class="player-olympic-player-next-tip">下一节</div></div>')}return s()(e,[{key:"createEl",value:function(e){this.$html.click(this.clickHandle),$(e).find(".prism-play-btn").after(this.$html)}}]),e}());t.a=n}});