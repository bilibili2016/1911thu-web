webpackJsonp([42,72],{"0/p8":function(e,t,n){"use strict";t.b=function(e,t,n){Object(a.d)(t)||Object(a.e)(t)?n():n(new Error("请填入有效的手机号/学号"))},t.c=function(e,t,n){Object(a.d)(t)?n():n(new Error("请填入有效的手机号"))},t.a=function(e,t,n){Object(a.a)(t)?n():n(new Error("请填入有效的验证码"))},t.d=function(e,t){t(Object(a.f)(e)?e:new Error("请输入不包含特殊字符且小于30个字符的关键词！"))};var a=n("iG+4")},"35Q2":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("hIEY"),i=n("7plO"),s=n("XyMi"),o=!1,r=function(e){o||n("Kk7d")},l=Object(s.a)(a.a,i.a,i.b,!1,r,"data-v-48d67f3d",null);l.options.__file="pages/profile/components/mysetting/setPersonal.vue",t.default=l.exports},"7plO":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("el-form",{ref:"psnForm",staticClass:"psnForm",attrs:{model:e.psnForm,rules:e.rules,"label-width":"135px"}},[a("el-form-item",{attrs:{label:"学号",prop:"student_number"}},[a("el-input",{attrs:{readonly:""},model:{value:e.psnForm.student_number,callback:function(t){e.$set(e.psnForm,"student_number",t)},expression:"psnForm.student_number"}})],1),a("el-form-item",{attrs:{label:"昵称",prop:"nick_name"}},[a("el-input",{model:{value:e.psnForm.nick_name,callback:function(t){e.$set(e.psnForm,"nick_name",t)},expression:"psnForm.nick_name"}})],1),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-radio-group",{model:{value:e.psnForm.sex,callback:function(t){e.$set(e.psnForm,"sex",t)},expression:"psnForm.sex"}},[a("el-radio",{attrs:{label:"1"}},[e._v("男")]),a("el-radio",{attrs:{label:"2"}},[e._v("女")])],1)],1),a("el-form-item",{attrs:{label:"生日",prop:"birthday"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd"},model:{value:e.psnForm.birthday,callback:function(t){e.$set(e.psnForm,"birthday",t)},expression:"psnForm.birthday"}})],1),a("el-form-item",{attrs:{label:"所在地区",prop:"province"}},[a("el-select",{attrs:{placeholder:"省"},on:{change:e.provinceChange},model:{value:e.psnForm.province_name,callback:function(t){e.$set(e.psnForm,"province_name",t)},expression:"psnForm.province_name"}},e._l(e.province,function(e,t){return a("el-option",{key:"prov"+t,attrs:{label:e.label,value:e.value}})})),a("el-select",{attrs:{placeholder:"市","no-data-text":"请先选择所在省份"},on:{change:e.cityChange},model:{value:e.psnForm.city_name,callback:function(t){e.$set(e.psnForm,"city_name",t)},expression:"psnForm.city_name"}},e._l(e.city,function(e,t){return a("el-option",{key:"city"+t,attrs:{label:e.label,value:e.value}})})),a("el-select",{attrs:{placeholder:"区","no-data-text":"请先选择所在城市"},on:{change:e.areaChange},model:{value:e.psnForm.area_name,callback:function(t){e.$set(e.psnForm,"area_name",t)},expression:"psnForm.area_name"}},e._l(e.area,function(e,t){return a("el-option",{key:"area"+t,attrs:{label:e.label,value:e.value}})}))],1),a("el-form-item",{attrs:{label:"职业",prop:"position"}},[a("el-select",{staticClass:"profession",attrs:{placeholder:"请选择"},model:{value:e.psnForm.position,callback:function(t){e.$set(e.psnForm,"position",t)},expression:"psnForm.position"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{maxlength:"50",placeholder:"请输入您的邮箱地址"},model:{value:e.psnForm.email,callback:function(t){e.$set(e.psnForm,"email",t)},expression:"psnForm.email"}})],1),a("el-form-item",{staticClass:"telForm",attrs:{disable:"",label:"手机号"}},[a("el-input",{staticClass:"telephone",attrs:{disabled:""},model:{value:e.psnForm.user_name,callback:function(t){e.$set(e.psnForm,"user_name",t)},expression:"psnForm.user_name"}}),""==e.psnForm.user_name?a("span",{staticClass:"teledit",on:{click:e.handleBindPhone}},[a("img",{attrs:{src:n("DyKh"),alt:""}}),e._v("绑定\n        ")]):a("span",{staticClass:"teledit",on:{click:e.modifyPhone}},[a("img",{attrs:{src:n("EOz4"),alt:""}}),e._v("修改\n        ")])],1),e.hasCompany?a("el-form-item",{key:"psnForm.company_name",attrs:{label:"单位名称"}},[a("el-input",{attrs:{maxlength:"30",placeholder:"请输入您的单位名称"},model:{value:e.psnForm.company_name,callback:function(t){e.$set(e.psnForm,"company_name",t)},expression:"psnForm.company_name"}})],1):a("el-form-item",{attrs:{label:"单位名称"}},[a("el-input",{attrs:{maxlength:"30",placeholder:"请输入您的单位名称"},model:{value:e.psnForm.company_name,callback:function(t){e.$set(e.psnForm,"company_name",t)},expression:"psnForm.company_name"}})],1),a("el-form-item",{staticClass:"submit",attrs:{size:"large"}},[a("el-button",{staticClass:"submitAble",attrs:{type:"primary",round:""},on:{click:function(t){e.onSubmit("psnForm")}}},[e._v("提交")])],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showBindBg,expression:"showBindBg"}],staticClass:"bindBg"},[a("v-bindphone",{attrs:{bindTelData:e.bindTelData,numPhone:e.psnForm.user_name},on:{close:e.close,getUserData:e.getUserData}})],1)])},i=[];a._withStripped=!0},DyKh:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAVFBMVEUAAAB4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIa2HJJoAAAAG3RSTlMALKA7rHdojBrCmVoh8+i2NNxxEQjTyV8lgVWfX8x0AAAAr0lEQVQoz22PVxLDIBBDBSEGXOOaovvfM8ZlFhj0AzwN7ANZXF0rFKK451HkRksT8wloyFeJA+/sTktWwNXEBpb63tbUSeHLhWOPgQuAKn0Kajb0gctw9z3GGprARfdBcgQ89bx6k/ChH2E4BOWIn/7DYeKsbYU3wLKJYcyhdt6PcbHRnmJYev4gWTndW88Kkobd9csnu1l4OPNzrQrIG+FZYzW7Fig0KRcDU7sM/QGkFwyASFuScQAAAABJRU5ErkJggg=="},EOz4:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAAARVBMVEUAAAB4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIZ4MIa7g5W1AAAAFnRSTlMAM8MTC4VW7ujgRBfTnfTZTj0fj3hgxl1+egAAAI1JREFUGNNlz+0OgyAMheGDsA3Hp6i9/0tdbbJYy/vzyYEA4HQe3LYWFHqUWIky2kNXj04UBxba/R3wZU1gPqBycuLil1LeNg/LG28DSh6K//cGolNz520Cwofeih1vPSw72Vrme3OAZdYYYFh0wHKXv1kO8oaJseSEmSXLB0xRuDjTtW5Ecyf2Wi3W6H6Fig8H5NXwogAAAABJRU5ErkJggg=="},GNFF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("O5Gx"),i=n("oUtt"),s=n("XyMi"),o=!1,r=function(e){o||n("S+c9")},l=Object(s.a)(a.a,i.a,i.b,!1,r,"data-v-514c0eec",null);l.options.__file="pages/profile/components/mysetting/bindPhone.vue",t.default=l.exports},Kk7d:function(e,t,n){var a=n("ofPt");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals),n("rjj0")("0554f4da",a,!1,{sourceMap:!1})},O5Gx:function(e,t,n){"use strict";var a=n("0/p8"),i=n("SL1N"),s=n("v/8m");t.a={props:["bindTelData","numPhone"],data:function(){return{codeInterval:null,isReturnShow:!0,isFirstShow:!0,codeClick:!0,submitClick:!0,validataPhone:{phones:""},validataPhoneRules:{phones:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:a.c,trigger:"blur"}]},bindwxRules:{phones:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:a.c,trigger:"blur"}],codes:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},methods:{back:function(){this.isFirstShow=!0,this.initData()},close:function(){this.$emit("close"),this.isFirstShow=!0,this.validataPhone.phones="",this.initData()},initData:function(){this.bindTelData.phones="",this.bindTelData.codes="",clearInterval(this.codeInterval),this.bindTelData.getCode="获取验证码",this.bindTelData.seconds=30,this.codeClick=!0},nextStep:function(e){var t=this;this.$refs[e].validate(function(e){e&&i.z.confirmPhoneByUser(t.validataPhone).then(function(e){0==e.status?t.isFirstShow=!1:Object(s.i)(t,"error",e.msg)})})},verifyRgTel:function(){var e=this;if(30==this.bindTelData.seconds&&this.codeClick){if(this.codeClick=!1,!/^[1][2,3,4,5,6,7,8,9][0-9]{9}$/.test(this.bindTelData.phones))return Object(s.i)(this,"error","请输入正确的手机号！"),this.codeClick=!0,!1;i.d.verifyPhone(this.bindTelData).then(function(t){0!==t.status?(Object(s.i)(e,"error",t.msg),e.codeClick=!0):e.getCode()})}},getCode:function(){var e=this;30===this.bindTelData.seconds&&(this.bindTelData.types=4,i.d.smsCodes(this.bindTelData).then(function(t){var n=0===t.status?"success":"error";Object(s.i)(e,n,t.msg),e.bindTelData.getCode=e.bindTelData.seconds+"秒后重新发送",e.codeInterval=setInterval(function(){e.bindTelData.seconds<=1?(e.codeClick=!0,e.bindTelData.getCode="获取验证码",e.bindTelData.seconds=30,clearInterval(e.codeInterval)):e.bindTelData.getCode=--e.bindTelData.seconds+"秒后重新发送"},1e3)}))},submitPhone:function(e){var t=this;this.submitClick&&(this.submitClick=!1,this.$refs[e].validate(function(e){e?(t.bindTelData.oldPhone=t.validataPhone.phones,i.z.editPhone(t.bindTelData).then(function(e){0==e.status?(Object(s.i)(t,"success","绑定成功"),t.$emit("getUserData"),t.submitClick=!0,t.close()):(Object(s.i)(t,"error",e.msg),t.submitClick=!0)})):t.submitClick=!0}))}},mounted:function(){var e=this;this.$bus.$on("openTwo",function(){e.isFirstShow=!1,e.isReturnShow=!1})}}},"S+c9":function(e,t,n){var a=n("bTD3");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals),n("rjj0")("43705a62",a,!1,{sourceMap:!1})},bTD3:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"",""])},hIEY:function(e,t,n){"use strict";var a=n("woOf"),i=n.n(a),s=n("BO1k"),o=n.n(s),r=n("Dd8w"),l=n.n(r),c=n("NYxO"),u=n("lHEt"),m=n("SL1N"),d=n("GNFF"),p=(n("0/p8"),n("v/8m"));t.a={props:["data","hasCompany"],data:function(){return{showBindBg:!1,area:[],province:[],city:[],options:[],psnForm:{student_number:"",user_name:"",head_img:"",nick_name:"",real_name:"",birthday:"",sex:"1",position:"",province:"",province_name:"",city:"",city_name:"",area:"",area_name:"",company_name:"",company_code:""},rules:{nick_name:[{required:!0,message:"昵称不能为空"},{min:2,max:18,message:"请输入至少2位最多18位，可包含汉字，英文字母，数字，下划线",trigger:"blur"},{validator:function(e,t,n){/^(?!_)(?!.*?_$)[a-zA-Z0-9_\u4e00-\u9fa5]+$/.test(t)||n(new Error("请输入至少2位最多18位，可包含汉字，英文字母，数字，下划线")),n()},trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],birthday:[{required:!0,type:"string",message:"请选择生日",trigger:"change"}],province:[{required:!0,message:"请选择您的所在地",trigger:"change"}],position:[{required:!0,message:"职业不能为空"},{required:!0,message:"请填写您的职业",trigger:"blur"}],email:[{required:!0,message:"请输入正确的邮箱地址",trigger:["blur"]},{validator:function(e,t,n){/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/.test(t)||n(new Error("请输入正确的邮箱！")),n()},trigger:"blur"}]},bindTelData:{phones:"",codes:"",getCode:"获取验证码",seconds:30,types:1,openid:null,companyCodes:"",captchaDisable:!1,exist:!1,checked:!1}}},components:{"v-bindphone":d.default},computed:l()({},Object(c.mapGetters)("auth",["isAuthenticated"])),methods:{provinceChange:function(e){this.psnForm.city_name="",this.psnForm.area_name="",this.psnForm.city="",this.psnForm.area="",this.province||0!=this.province.length||this.getRegionList(),this.city=this.getRegion(this.province,e);var t=!0,n=!1,a=void 0;try{for(var i,s=o()(this.province);!(t=(i=s.next()).done);t=!0){var r=i.value;e==r.region_code&&(this.psnForm.province_name=r.name,this.psnForm.province=r.region_code)}}catch(e){n=!0,a=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw a}}},cityChange:function(e){this.psnForm.area_name="",this.psnForm.area="",this.city||0!=this.city.length||this.getRegionList(),this.area=this.getRegion(this.city,e);var t=!0,n=!1,a=void 0;try{for(var i,s=o()(this.city);!(t=(i=s.next()).done);t=!0){var r=i.value;e==r.region_code&&(this.psnForm.city_name=r.name,this.psnForm.city=r.region_code)}}catch(e){n=!0,a=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw a}}},areaChange:function(e){var t=!0,n=!1,a=void 0;try{for(var i,s=o()(this.area);!(t=(i=s.next()).done);t=!0){var r=i.value;e==r.region_code&&(this.psnForm.area_name=r.name,this.psnForm.area=r.region_code)}}catch(e){n=!0,a=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw a}}},getRegion:function(e,t){var n=[],a=!0,s=!1,r=void 0;try{for(var l,c=o()(e);!(a=(l=c.next()).done);a=!0){var u=l.value;if(u.region_code==t){var m=!0,d=!1,p=void 0;try{for(var h,f=o()(u.city);!(m=(h=f.next()).done);m=!0){var v=h.value;n.push(i()({},v,{label:v.name,value:v.region_code}))}}catch(e){d=!0,p=e}finally{try{!m&&f.return&&f.return()}finally{if(d)throw p}}}}}catch(e){s=!0,r=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw r}}return n},getRegionList:function(){var e=this;m.z.getRegionList({region_code:""}).then(function(t){e.mapregionList=t.data.regionList,e.province=e.mapregionList.map(function(e){return i()({},e,{label:e.name,value:e.region_code})})})},getPositionList:function(){var e=this;m.z.positionList().then(function(t){var n=t.data;e.options=n.map(function(e){return{label:e.position_name,value:e.id}})})},onSubmit:function(e){var t=this;if(""!==this.psnForm.province&&(""===this.psnForm.city||""===this.psnForm.area))return this.$message({showClose:!0,type:"error",message:"请选择地址信息！"}),!1;this.$refs[e].validate(function(e){e&&m.z.perInformation(t.psnForm).then(function(e){0==e.status?t.getUserData():t.$message({showClose:!0,type:"error",message:e.msg})})})},getUserData:function(){this.$emit("getUserData")},modifyPhone:function(){Object(p.a)("pane-tab-sixth","-ms-page",0),this.showBindBg=!0},close:function(){Object(p.a)("pane-tab-sixth","relative",1),this.showBindBg=!1},handleBindPhone:function(){Object(p.a)("pane-tab-sixth","-ms-page",0),this.showBindBg=!0,this.$bus.$emit("openTwo")}},watch:{data:function(e){this.psnForm=this.data},province:function(e){this.city=this.getRegion(e,this.psnForm.province),this.area=this.getRegion(this.city,this.psnForm.city)}},mounted:function(){var e=this;this.psnForm=this.data,u.a.get("gid")&&"tab-sixth"==u.a.get("gid")&&(this.getPositionList(),this.getRegionList()),this.$bus.$on("getPositionList",function(t){e.getPositionList(),e.getRegionList()})}}},"iG+4":function(e,t,n){"use strict";t.b=function(e){return/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(e)},t.a=function(e){return/^\d{4}$/.test(e)},t.d=function(e){return/^[1][2,3,4,5,6,7,8,9][0-9]{9}$/.test(e)},t.e=function(e){return/^[2][0-9]{8}$/.test(e)},t.c=function(e){return/^([\d]|[\w]){6,16}$/.test(e)},t.f=function(e){return!/[@#\$%\^&\*]+/g.test(e)&&""!==e&&e.length<30}},oUtt:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bingPhone"},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.isFirstShow&&e.isReturnShow,expression:"!isFirstShow && isReturnShow"}],staticClass:"el-icon-back backPop",on:{click:e.back}}),n("i",{staticClass:"el-icon-close closePop",on:{click:e.close}}),n("el-form",{directives:[{name:"show",rawName:"v-show",value:e.isFirstShow,expression:"isFirstShow"}],ref:"validataPhone",staticClass:"demo-ruleForm",attrs:{model:e.validataPhone,"status-icon":"",rules:e.validataPhoneRules}},[n("div",{staticClass:"formInner"},[n("div",{staticClass:"first"},[n("h4",{staticClass:"clearfix"},[e._v("认证手机号码")]),n("p",{staticClass:"text"},[e._v("友情提醒：解绑后，您将无法再使用此手机号进行找回密码和登录等相关操作。")]),n("p",{staticClass:"text num"},[e._v("已绑定手机号：\n          "),n("span",[e._v(e._s(e.numPhone))])]),n("el-form-item",{attrs:{prop:"phones"}},[n("el-input",{attrs:{placeholder:"请输入您已绑定的手机号"},model:{value:e.validataPhone.phones,callback:function(t){e.$set(e.validataPhone,"phones",e._n(t))},expression:"validataPhone.phones"}})],1),n("el-row",[n("el-button",{nativeOn:{click:function(t){e.nextStep("validataPhone")}}},[e._v("下一步")])],1)],1)])]),n("el-form",{directives:[{name:"show",rawName:"v-show",value:!e.isFirstShow,expression:"!isFirstShow"}],ref:"bindTelData",staticClass:"demo-ruleForm",attrs:{model:e.bindTelData,"status-icon":"",rules:e.bindwxRules}},[n("div",{staticClass:"formInner"},[n("div",{staticClass:"two"},[n("h4",{staticClass:"clearfix"},[e._v("绑定手机")]),n("el-form-item",{attrs:{prop:"phones"}},[n("el-input",{attrs:{placeholder:"请输入您新的手机号"},model:{value:e.bindTelData.phones,callback:function(t){e.$set(e.bindTelData,"phones",e._n(t))},expression:"bindTelData.phones"}})],1),n("el-form-item",{staticClass:"lastItem clearfix",attrs:{prop:"codes"}},[n("el-input",{staticClass:"captcha",attrs:{placeholder:"请输入短信验证码"},model:{value:e.bindTelData.codes,callback:function(t){e.$set(e.bindTelData,"codes",e._n(t))},expression:"bindTelData.codes"}}),n("div",{staticClass:"getCode",on:{click:e.verifyRgTel}},[e._v(e._s(e.bindTelData.getCode))])],1),n("el-row",[n("el-button",{staticClass:"submit",attrs:{disabled:!e.submitClick},nativeOn:{click:function(t){e.submitPhone("bindTelData")}}},[e._v("提交")])],1)],1)])])],1)},i=[];a._withStripped=!0},ofPt:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,"",""])}});