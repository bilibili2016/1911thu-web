webpackJsonp([72],{"0/p8":function(t,e,i){"use strict";e.b=function(t,e,i){Object(s.d)(e)||Object(s.e)(e)?i():i(new Error("请填入有效的手机号/学号"))},e.c=function(t,e,i){Object(s.d)(e)?i():i(new Error("请填入有效的手机号"))},e.a=function(t,e,i){Object(s.a)(e)?i():i(new Error("请填入有效的验证码"))},e.d=function(t,e){e(Object(s.f)(t)?t:new Error("请输入不包含特殊字符且小于30个字符的关键词！"))};var s=i("iG+4")},GNFF:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("O5Gx"),n=i("oUtt"),a=i("XyMi"),o=!1,r=function(t){o||i("S+c9")},c=Object(a.a)(s.a,n.a,n.b,!1,r,"data-v-514c0eec",null);c.options.__file="pages/profile/components/mysetting/bindPhone.vue",e.default=c.exports},O5Gx:function(t,e,i){"use strict";var s=i("0/p8"),n=i("SL1N"),a=i("v/8m");e.a={props:["bindTelData","numPhone"],data:function(){return{codeInterval:null,isReturnShow:!0,isFirstShow:!0,codeClick:!0,submitClick:!0,validataPhone:{phones:""},validataPhoneRules:{phones:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:s.c,trigger:"blur"}]},bindwxRules:{phones:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:s.c,trigger:"blur"}],codes:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},methods:{back:function(){this.isFirstShow=!0,this.initData()},close:function(){this.$emit("close"),this.isFirstShow=!0,this.validataPhone.phones="",this.initData()},initData:function(){this.bindTelData.phones="",this.bindTelData.codes="",clearInterval(this.codeInterval),this.bindTelData.getCode="获取验证码",this.bindTelData.seconds=30,this.codeClick=!0},nextStep:function(t){var e=this;this.$refs[t].validate(function(t){t&&n.z.confirmPhoneByUser(e.validataPhone).then(function(t){0==t.status?e.isFirstShow=!1:Object(a.i)(e,"error",t.msg)})})},verifyRgTel:function(){var t=this;if(30==this.bindTelData.seconds&&this.codeClick){if(this.codeClick=!1,!/^[1][2,3,4,5,6,7,8,9][0-9]{9}$/.test(this.bindTelData.phones))return Object(a.i)(this,"error","请输入正确的手机号！"),this.codeClick=!0,!1;n.d.verifyPhone(this.bindTelData).then(function(e){0!==e.status?(Object(a.i)(t,"error",e.msg),t.codeClick=!0):t.getCode()})}},getCode:function(){var t=this;30===this.bindTelData.seconds&&(this.bindTelData.types=4,n.d.smsCodes(this.bindTelData).then(function(e){var i=0===e.status?"success":"error";Object(a.i)(t,i,e.msg),t.bindTelData.getCode=t.bindTelData.seconds+"秒后重新发送",t.codeInterval=setInterval(function(){t.bindTelData.seconds<=1?(t.codeClick=!0,t.bindTelData.getCode="获取验证码",t.bindTelData.seconds=30,clearInterval(t.codeInterval)):t.bindTelData.getCode=--t.bindTelData.seconds+"秒后重新发送"},1e3)}))},submitPhone:function(t){var e=this;this.submitClick&&(this.submitClick=!1,this.$refs[t].validate(function(t){t?(e.bindTelData.oldPhone=e.validataPhone.phones,n.z.editPhone(e.bindTelData).then(function(t){0==t.status?(Object(a.i)(e,"success","绑定成功"),e.$emit("getUserData"),e.submitClick=!0,e.close()):(Object(a.i)(e,"error",t.msg),e.submitClick=!0)})):e.submitClick=!0}))}},mounted:function(){var t=this;this.$bus.$on("openTwo",function(){t.isFirstShow=!1,t.isReturnShow=!1})}}},"S+c9":function(t,e,i){var s=i("bTD3");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals),i("rjj0")("43705a62",s,!1,{sourceMap:!1})},bTD3:function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"",""])},"iG+4":function(t,e,i){"use strict";e.b=function(t){return/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(t)},e.a=function(t){return/^\d{4}$/.test(t)},e.d=function(t){return/^[1][2,3,4,5,6,7,8,9][0-9]{9}$/.test(t)},e.e=function(t){return/^[2][0-9]{8}$/.test(t)},e.c=function(t){return/^([\d]|[\w]){6,16}$/.test(t)},e.f=function(t){return!/[@#\$%\^&\*]+/g.test(t)&&""!==t&&t.length<30}},oUtt:function(t,e,i){"use strict";i.d(e,"a",function(){return s}),i.d(e,"b",function(){return n});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bingPhone"},[i("i",{directives:[{name:"show",rawName:"v-show",value:!t.isFirstShow&&t.isReturnShow,expression:"!isFirstShow && isReturnShow"}],staticClass:"el-icon-back backPop",on:{click:t.back}}),i("i",{staticClass:"el-icon-close closePop",on:{click:t.close}}),i("el-form",{directives:[{name:"show",rawName:"v-show",value:t.isFirstShow,expression:"isFirstShow"}],ref:"validataPhone",staticClass:"demo-ruleForm",attrs:{model:t.validataPhone,"status-icon":"",rules:t.validataPhoneRules}},[i("div",{staticClass:"formInner"},[i("div",{staticClass:"first"},[i("h4",{staticClass:"clearfix"},[t._v("认证手机号码")]),i("p",{staticClass:"text"},[t._v("友情提醒：解绑后，您将无法再使用此手机号进行找回密码和登录等相关操作。")]),i("p",{staticClass:"text num"},[t._v("已绑定手机号：\n          "),i("span",[t._v(t._s(t.numPhone))])]),i("el-form-item",{attrs:{prop:"phones"}},[i("el-input",{attrs:{placeholder:"请输入您已绑定的手机号"},model:{value:t.validataPhone.phones,callback:function(e){t.$set(t.validataPhone,"phones",t._n(e))},expression:"validataPhone.phones"}})],1),i("el-row",[i("el-button",{nativeOn:{click:function(e){t.nextStep("validataPhone")}}},[t._v("下一步")])],1)],1)])]),i("el-form",{directives:[{name:"show",rawName:"v-show",value:!t.isFirstShow,expression:"!isFirstShow"}],ref:"bindTelData",staticClass:"demo-ruleForm",attrs:{model:t.bindTelData,"status-icon":"",rules:t.bindwxRules}},[i("div",{staticClass:"formInner"},[i("div",{staticClass:"two"},[i("h4",{staticClass:"clearfix"},[t._v("绑定手机")]),i("el-form-item",{attrs:{prop:"phones"}},[i("el-input",{attrs:{placeholder:"请输入您新的手机号"},model:{value:t.bindTelData.phones,callback:function(e){t.$set(t.bindTelData,"phones",t._n(e))},expression:"bindTelData.phones"}})],1),i("el-form-item",{staticClass:"lastItem clearfix",attrs:{prop:"codes"}},[i("el-input",{staticClass:"captcha",attrs:{placeholder:"请输入短信验证码"},model:{value:t.bindTelData.codes,callback:function(e){t.$set(t.bindTelData,"codes",t._n(e))},expression:"bindTelData.codes"}}),i("div",{staticClass:"getCode",on:{click:t.verifyRgTel}},[t._v(t._s(t.bindTelData.getCode))])],1),i("el-row",[i("el-button",{staticClass:"submit",attrs:{disabled:!t.submitClick},nativeOn:{click:function(e){t.submitPhone("bindTelData")}}},[t._v("提交")])],1)],1)])])],1)},n=[];s._withStripped=!0}});