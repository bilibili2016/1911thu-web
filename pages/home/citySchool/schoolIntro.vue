<template>
  <div class="schoolIntro">
    <div class="schoolBanner">
      <h4>1911学堂城市分校校长招募计划</h4>
      <p>1911学堂，一所致力于终身教育的互联网学校。1911学堂立足互联网时代的技术前沿，以信息化为核心，以大数据为基础，以服务人的终身学习为追求，大胆革新终身教育学习模式，积极探索“互联网+人工智能+教育”的智慧教学模式，全力打造终身学习教育的新业态，为学员提供“线上+线下”混合式学习服务，帮助每一位努力奋进的人实现理想、开创更好的未来。</p>
      <p>城市分校校长招募计划是1911学堂推动全球布局、实现多方共赢的重大战略举措。在1911学堂总部的支持下，各城市分校也将在办学中获得成长与收益：</p>
    </div>
    <div class="con-one">
      <div class="earnings clearfix">
        <div class="item">
          <p class="img-con ">
            <img class="img1" src="http://static-image.1911edu.com/school-icon1.png" alt="">
          </p>
          <p class="title">品牌赋能</p>
          <p class="text">1911学堂，是终身教育领域的顶级品牌，有其巨大价值的赋能，将迅速提升自身影响力。</p>
        </div>
        <div class="item">
          <p class="img-con ">
            <img class="img2" src="http://static-image.1911edu.com/school-icon2.png" alt="">
          </p>
          <p class="title">资源共享</p>
          <p class="text">城市分校将共享1911学堂课程、导师及行业资源，各地政府、企业与全球名校资源，快速成长为专业领先机构。</p>
        </div>
        <div class="item">
          <p class="img-con ">
            <img class="img3" src="http://static-image.1911edu.com/school-icon3.png" alt="">
          </p>
          <p class="title">合作拓展</p>
          <p class="text">加入1911学堂全球布局，与其他城市分校形成跨地域、跨行业的庞大合作网络体系，创造未来发展的新机遇。</p>
        </div>
        <div class="item">
          <p class="img-con ">
            <img class="img4" src="http://static-image.1911edu.com/school-icon4.png" alt="">
          </p>
          <p class="title">丰厚回报</p>
          <p class="text">1911学堂为各城市分校设计了极具市场竞争力的收益方案，通过深度换位思考，最大程度保障城市分校权益。</p>
        </div>
      </div>
      <div class="cooperation clearfix">
        <div class="co-img">
          <img src="http://static-image.1911edu.com/school-icon5.png" alt="">
        </div>
        <div class="desc">
          <div class="desc-con one">
            <p class="top"><i class="circle"></i>合作目标</p>
            <p class="bottom">在1911学堂现有的平台、产品、资源等基础上，我们希望与您共建1911学堂城市分校，让1911学堂的旗帜遍布全球，推动终身教育事业的发展。</p>
          </div>
          <div class="desc-con two">
            <p class="top"><i class="circle"></i>合作模式</p>
            <p class="bottom">城市分校缴纳一定数额的技术服务费、市场支持费与品牌保证金，以获得1911学堂的品牌授权。合作期间，1911学堂总部负责提供课程、师资及相关服务与支持，城市分校负责在当地代表1911学堂办学。</p>
          </div>
          <div class="desc-con three">
            <p class="top"><i class="circle"></i>合作内容</p>
            <p class="bottom">1911学堂城市分校业务内容包括在线学院、混合式标准项目、单位内训项目、国际学位项目。</p>
          </div>
        </div>
      </div>
    </div>
    <div class="con-two">
      <div class="application">
        <h4 class="title">申请条件</h4>
        <p class="smal">城市分校校长申请者须满足以下条件</p>
        <div class="details clearfix">
          <div class="left">
            <div class="item">
              <span class="num">01</span>
              <span class="text">愿共同推动终身教育事业发展的机构法人或实际控制人；</span>
            </div>
            <div class="item">
              <span class="num">03</span>
              <span class="text">机构注册资金不低于30万元，原则上成立时间两年以上；</span>
            </div>
            <div class="item">
              <span class="num">05</span>
              <span class="text">无犯罪记录，拥有或者能够组建强力、高效的业务团队；</span>
            </div>
          </div>
          <div class="middle">
            <img src="http://static-image.1911edu.com/school-icon7.png" alt="">
          </div>
          <div class="right">
            <div class="item">
              <span class="num">02</span>
              <span class="text">认同1911学堂教育理念与办学模式，接受总部统一管理；</span>
            </div>
            <div class="item">
              <span class="num">04</span>
              <span class="text">有固定办公地点，能够提供容纳50至100人的教学场所；</span>
            </div>
            <div class="item">
              <span class="num">06</span>
              <span class="text">具备丰富的业内经验，有当地政府、客户等资源者优先。</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="con-three">
      <div class="configuration">
        <h4 class="title">分校配置</h4>
        <div class="desc">
          <p>北京市暂不设置城市分校。</p>
          <p>同一申请者可申请成为多个城市的分校校长。</p>
          <p>在分校数量达到上限的城市，未经当地分校校长书面许可，其他人（包括1911学堂总部）不得在当地开展1911学堂办学业务。</p>
        </div>
        <div class="itemDiv clearfix">
          <div class="item one">
            <p class="s-title"><span class="level">A</span><span class="">类城市</span></p>
            <p class="desc">人口超1000万的地级以上城市，每个城市设置不超过5所分校；</p>
          </div>
          <div class="item two">
            <p class="s-title"><span class="level">B</span><span class="">类城市</span></p>
            <p class="desc">人口超600万的地级以上城市，每个城市设置不超过4所分校；</p>
          </div>
          <div class="item three">
            <p class="s-title"><span class="level">C</span><span class="">类城市</span></p>
            <p class="desc">每个城市设置不超过3所分校，包括除A、B类城市外的其它地级行政区；</p>
          </div>
          <div class="item four">
            <p class="s-title"><span class="">县级市</span></p>
            <p class="desc">每个城市设置不超过1所分校，包括全国所有县级市。</p>
          </div>
        </div>
        <h4 class="title">申请流程</h4>
        <img src="http://static-image.1911edu.com/school-icon11.png" alt="" class="process">
        <div class="deadline clearfix">
          <div class="left"><span class="inner">合作期限</span></div>
          <div class="right">
            <p class="right-des"><span class="icon"></span>1911学堂城市分校合作协议有效期为三年。</p>
            <p class="right-des"><span class="icon"></span>合作期间，1911学堂总部将每年对城市分校进行业绩考核，如达到标准，合约将继续履行；如未达到标准，1911学堂总部将保留终止合作的权利。</p>
          </div>
        </div>
        <div class="support">
          <h4 class="title">总部支持</h4>
          <div class="index clearfix">
            <div class="index-left">
              <p class="index-item"><span class="num">1.</span><span class="index-title">品牌授权：</span>授权当地使用1911学堂品牌办学</p>
              <p class="index-item"><span class="num">2.</span><span class="index-title">认证证书：</span>1911学堂结业证书&nbsp;&nbsp;&nbsp;</p>
              <p class="index-item"><span class="num">3.</span><span class="index-title">产品支撑：</span>线上课程全提供及技术平台支撑</p>
              <p class="index-item"><span class="num">4.</span><span class="index-title">业务指导：</span>全流程、全周期的业务指导培训</p>
            </div>
            <div class="index-right">
              <p class="index-item"><span class="num">5.</span><span class="index-title">导师服务：</span>当地线下课程导师的邀请与服务</p>
              <p class="index-item"><span class="num">6.</span><span class="index-title">资源对接：</span>当地及全国相关方资源联络对接</p>
              <p class="index-item"><span class="num">7.</span><span class="index-title">活动出席：</span>1911及高校领导可出席重大活动</p>
              <p class="index-item"><span class="num">8.</span><span class="index-title">信息共享：</span>行业、媒体等信息资源开放共享</p>

            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="schoolInfo">
      <div class="apply">
        <div class="applyInputs">
          <!-- <div class="con-item counsel clearfix">
            <div class="fl">申请咨询：</div>
            <div class="fr">
              <p>闫雨辰&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15117961911&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yanyuchen@1911thu.com</p>
              <p>谢晓辉&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;18614061911&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xiexiaohui@1911thu.com</p>
            </div>
          </div> -->
          <div class="con-item name clearfix">
            <div class="fl"><i class="red">*</i>城市：</div>
            <div class="fr selectFr">
              <div class="text">请选择您要申请成为分校校长的城市</div>
              <el-select v-model="schoolForm.province_name" placeholder="请选择省份" @change="provinceChange">
                <el-option v-for="(p,index) in province" :key="'prov'+index" :label="p.label" :value="p.value"></el-option>
              </el-select>
              <el-select v-model="schoolForm.city_name" placeholder="请选择城市" no-data-text="请先选择所在省份" @change="cityChange">
                <el-option v-for="(p,index) in city" :key="'city'+index" :label="p.label" :value="p.value"></el-option>
              </el-select>
            </div>
          </div>
          <div class="con-item name clearfix">
            <div class="fl"><i class="red">*</i>姓名：</div>
            <div class="fr">
              <el-input v-model="schoolForm.name" placeholder="请输入您的姓名"></el-input>
            </div>
          </div>
          <div class="con-item name clearfix">
            <div class="fl"><i class="red">*</i>电话：</div>
            <div class="fr">
              <el-input v-model="schoolForm.tel" placeholder="请输入您的手机号"></el-input>
              <!-- <el-input class="tel" v-model="teacherForm.tel" placeholder="请填写手机号"></el-input> -->
              <!-- <el-input class="verification" v-model="teacherForm.code" placeholder="请填写短信验证码"></el-input> -->
              <!-- <span class="code" @click="smsCodes">{{telCodes.getCode}}</span> -->
            </div>
          </div>

          <div class="con-item name clearfix">
            <div class="fl"><i class="red">*</i>邮箱：</div>
            <div class="fr">
              <el-input v-model="schoolForm.email" placeholder="请输入您的邮箱"></el-input>
            </div>
          </div>
          <div class="submit">
            <el-button :disabled="isClick" @click="validate">提交申请</el-button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
<script>
import { Trim, matchSplits, setTitle, message } from "@/lib/util/helper";
import { personalset, school } from "~/lib/v1_sdk/index";

export default {
  data() {
    return {
      isClick: false,
      province: [],
      city: [],
      mapregionList: {},
      schoolForm: {
        province: "", //省份编码
        province_name: "", //省份名称
        city: "", //城市编码
        city_name: "", //城市名称
        name: "", //姓名
        tel: "", //电话
        email: "" //邮箱
        // companyName: '', //公司名称
        // markAnalyze: '', //当地市场分析
        // advantageIntro: '', //自身优势介绍
        // jobImagine: '', //未来工作设想
        // businessLicense: '' //营业执照
      }
    };
  },
  methods: {
    handleLink(link) {
      this.$router.push(link);
    },
    provinceChange(val) {
      this.schoolForm.city_name = "";
      this.schoolForm.city = "";
      if (!this.province && this.province.length == 0) {
        this.getRegionList();
      }
      this.city = this.getRegion(this.province, val);
      for (let item of this.province) {
        if (val == item.region_code) {
          this.schoolForm.province_name = item.name;
          this.schoolForm.province = item.region_code;
        }
      }
    },
    cityChange(val) {
      if (!this.city && this.city.length == 0) {
        this.getRegionList();
      }
      for (let item of this.city) {
        if (val == item.region_code) {
          this.schoolForm.city_name = item.name;
          this.schoolForm.city = item.region_code;
        }
      }
    },
    // 整理省市区
    getRegion(data, val) {
      let tmp = [];
      for (let item of data) {
        if (item.region_code == val) {
          for (let cit of item.city) {
            tmp.push(
              Object.assign({}, cit, {
                label: cit.name,
                value: cit.region_code
              })
            );
          }
        }
      }
      return tmp;
    },
    // 获取省市区
    getRegionList() {
      personalset.getRegionList({ region_code: "" }).then(res => {
        this.mapregionList = res.data.regionList;
        this.province = this.mapregionList.map(item => {
          return Object.assign({}, item, {
            label: item.name,
            value: item.region_code
          });
        });
      });
    },
    //表单验证
    validate() {
      if (this.isClick) {
        return false;
      }
      this.isClick = true;
      const emailReg = /^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/;
      const telReg = /^[1][2,3,4,5,6,7,8,9][0-9]{9}$/;
      try {
        if (Trim(this.schoolForm.province) === "") throw "请选择省份";
        if (Trim(this.schoolForm.city) === "") throw "请选择城市";
        if (Trim(this.schoolForm.name) === "") throw "请输入姓名";
        if (Trim(this.schoolForm.tel) === "") throw "请输入手机号码";
        if (!telReg.test(Trim(this.schoolForm.tel)))
          throw "请输入正确的手机号码";
        if (Trim(this.schoolForm.email) === "") throw "请输入邮箱";
        if (!emailReg.test(Trim(this.schoolForm.email)))
          throw "请输入正确的邮箱";
      } catch (err) {
        message(this, "error", err);
        this.isClick = false;
        return false;
      }
      this.applicationSchoolmaster();
    },
    //申请分校长
    applicationSchoolmaster() {
      school.doRecruit(this.schoolForm).then(res => {
        this.isClick = false;
        if (res.status == 0) {
          this.isClick = true; //页面跳转之前不允许点击
          this.$router.push("/home/citySchool/submitSuccess");
        } else {
          message(this, "error", res.msg);
        }
      });
    }
  },
  mounted() {
    setTitle("城市分校-1911学堂");
    this.getRegionList();
  }
};
</script>
<style scoped lang="scss">
@import "~assets/style/citySchool/schoolIntro.scss";
</style>